require('./typdef')

/* eslint-disable indent */
/* eslint-disable no-multi-spaces */
const GENDER_DIFFERENCES = [
    3,  12,  19,  20,  25,  26,  41,  42,  44,  45,
   64,  65,  84,  85,  97, 111, 112, 118, 119, 123,
  129, 130, 154, 165, 166, 178, 185, 186, 190, 194,
  195, 198, 202, 203, 207, 208, 212, 214, 215, 217,
  221, 224, 229, 232, 255, 256, 257, 267, 269, 272,
  274, 275, 307, 308, 315, 316, 317, 322, 323, 332,
  350, 369, 396, 397, 398, 399, 400, 401, 402, 403,
  404, 405, 407, 415, 417, 418, 419, 424, 443, 444,
  445, 449, 450, 453, 454, 456, 457, 459, 460, 461,
  464, 465, 473, 521, 592, 593, 668, 678
]
/* eslint-enable indent */
/* eslint-enable no-multi-spaces */

// Rate of females out of 8 (e.g. 2 means a 25♀:75♂ ratio).
// Genderless Pokémon are represented with a 9.
const FEMALE_RATES = [
  undefined, // Shift to 1-indexed to match Pokémon ID.
  1, 1, 1, 1, 1, 1, 1, 1, 1, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 8, 8,
  8, 0, 0, 0, 6, 6, 6, 6, 6, 6,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 2, 2, 4,
  4, 4, 2, 2, 2, 2, 2, 2, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  9, 9, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 9,
  9, 4, 4, 4, 4, 0, 0, 4, 4, 4,
  4, 4, 8, 4, 8, 4, 4, 4, 4, 9,
  9, 4, 4, 8, 2, 2, 4, 0, 4, 4,
  4, 9, 1, 1, 1, 1, 9, 1, 1, 1,
  1, 1, 1, 9, 9, 9, 4, 4, 4, 9,
  9, 1, 1, 1, 1, 1, 1, 1, 1, 1,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 6, 6, 1, 1, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 1, 1, 4, 4, 4,
  9, 4, 4, 4, 4, 4, 4, 4, 6, 6,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 6, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 9, 4, 4, 0, 0, 8, 2, 2,
  8, 8, 9, 9, 9, 4, 4, 4, 9, 9,
  9, 1, 1, 1, 1, 1, 1, 1, 1, 1,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 9, 4, 4, 4, 2, 2, 6, 4, 6,
  6, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 0, 8, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 9, 9, 4, 4,
  4, 4, 9, 9, 1, 1, 1, 1, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 1, 6,
  4, 4, 4, 9, 9, 9, 9, 9, 9, 8,
  0, 9, 9, 9, 9, 9, 1, 1, 1, 1,
  1, 1, 1, 1, 1, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 1, 1, 1,
  1, 4, 8, 0, 1, 8, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  6, 6, 4, 4, 4, 9, 9, 4, 4, 8,
  4, 4, 4, 4, 4, 1, 1, 1, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 9, 4, 4, 4, 2, 2, 1, 4, 1,
  1, 4, 4, 9, 0, 4, 4, 8, 9, 9,
  9, 9, 9, 9, 4, 9, 9, 8, 9, 9,
  9, 9, 9, 9, 1, 1, 1, 1, 1, 1,
  1, 1, 1, 4, 4, 4, 4, 4, 4, 4,
  1, 1, 1, 1, 1, 1, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 2, 2, 2, 4, 4, 4, 0, 0, 4,
  4, 4, 4, 4, 4, 4, 4, 8, 8, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 1, 1, 1, 1, 4, 4, 1,
  1, 6, 6, 6, 6, 6, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 9, 9,
  9, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 9, 4, 4, 4, 4, 4,
  4, 9, 9, 4, 4, 4, 0, 0, 8, 8,
  4, 4, 4, 4, 4, 4, 4, 9, 9, 9,
  0, 0, 9, 9, 0, 9, 9, 9, 9, 1,
  1, 1, 1, 1, 1, 1, 1, 1, 4, 4,
  4, 4, 4, 4, 4, 4, 7, 7, 8, 8,
  8, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 1, 1, 1, 1, 1,
  4, 4, 9, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 9, 9, 9, 9, 9,
  9, 1, 1, 1, 1, 1, 1, 1, 1, 1,
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  6, 4, 4, 4, 4, 4, 4, 4, 4, 4,
  4, 4, 4, 4, 4, 4, 1, 8, 4, 4,
  8, 8, 8, 6, 4, 4, 4, 4, 4, 4,
  4, 9, 9, 9, 4, 4, 4, 4, 4, 4,
  9, 4, 4, 4, 9, 9, 9, 9, 9, 9,
  9, 9, 9, 9, 9, 9, 9, 9, 9, 9,
  9, 9, 9, 9, 9, 9, 9
]

/**
 * @param {number} id
 * @returns {boolean}
 */
function hasGenderDifference (id) {
  return GENDER_DIFFERENCES.includes(id)
}

/**
 * @param {number} id
 * @returns {Gender}
 */
function randomGender (id) {
  const femaleRate = FEMALE_RATES[id]
  if (femaleRate === 9 || femaleRate === undefined) {
    return 'genderless'
  }
  return (Math.random() * 8) < femaleRate ? 'female' : 'male'
}

module.exports = {
  hasGenderDifference,
  randomGender
}
